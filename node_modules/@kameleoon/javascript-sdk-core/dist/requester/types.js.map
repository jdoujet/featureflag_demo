{"version":3,"file":"types.js","names":["HttpMethod","Get","Post","exports","EVENT_TYPE_KEYS","PARAMETER_KEYS","TRACKING_KEYS","QUERY_KEYS"],"sources":["../../src/requester/types.ts"],"sourcesContent":["import {\n  JSONType,\n  FeatureFlagType,\n  ConfigurationDataType,\n} from 'src/campaignConfiguration';\nimport { Environment, ExternalPackageInfoType } from 'src/types';\nimport { Header } from './constants';\n\nexport type RequesterParamsType = {\n  siteCode: string;\n  environment?: Environment;\n  packageInfo: ExternalPackageInfoType;\n  requestDispatcher: IExternalRequestDispatcher;\n};\n\nexport type TrackExperimentParamsType = {\n  body: string;\n  variationId: number;\n  visitorCode: string;\n  experimentId: number;\n  isUnallocated: boolean;\n  userAgent?: string;\n};\n\nexport type TrackDataParamsType = {\n  visitorCode: string;\n  body: string;\n  userAgent?: string;\n};\n\ntype CustomDataEventType = {\n  sdk: {\n    name: string;\n    version: string;\n  };\n  itp: boolean;\n  time: number;\n  data: {\n    index: number;\n    valuesCountMap: {\n      [value: string]: number;\n    };\n    overwrite: boolean;\n    mappingIdentifier: boolean;\n  };\n};\n\nexport type VisitType = {\n  siteCode: string;\n  visitorCode: string;\n  customDataEvents: CustomDataEventType[];\n};\n\nexport type GetVisitorDataResultType = {\n  previousVisits?: [VisitType];\n  currentVisit?: VisitType;\n};\n\nexport type GetClientConfigurationResultType = Omit<\n  ConfigurationDataType,\n  'featureFlags'\n> & { featureFlagConfigurations: FeatureFlagType[] };\n\nexport enum HttpMethod {\n  Get = 'GET',\n  Post = 'POST',\n}\n\nconst EVENT_TYPE_KEYS = [\n  'customData',\n  'staticData',\n  'page',\n  'conversion',\n  'activity',\n  'experiment',\n] as const;\nconst PARAMETER_KEYS = [\n  'valuesCountMap',\n  'id',\n  'nonce',\n  'sdkName',\n  'sdkVersion',\n  'browserIndex',\n  'browserVersion',\n  'siteCode',\n  'environment',\n  'visitorCode',\n  'currentVisit',\n  'maxNumberPreviousVisits',\n  'customData',\n  'negative',\n  'revenue',\n  'title',\n  'referrersIndices',\n  'overwrite',\n  'index',\n  'href',\n  'variationId',\n  'deviceType',\n  'goalId',\n  'ts',\n  'key',\n] as const;\nconst TRACKING_KEYS = ['visit', 'map'] as const;\nconst QUERY_KEYS = ['sse', 'visitor', 'mobile', 'map', 'events'] as const;\n\nexport type TrackingType = Record<\n  Capitalize<(typeof TRACKING_KEYS)[number]>,\n  string\n>;\nexport type QueryType = Record<Capitalize<(typeof QUERY_KEYS)[number]>, string>;\nexport type ParameterType = Record<\n  Capitalize<(typeof PARAMETER_KEYS)[number]>,\n  string\n>;\nexport type EventType = Record<\n  Capitalize<(typeof EVENT_TYPE_KEYS)[number]>,\n  string\n>;\n\nexport type StrictTrackingRecord<T> = {\n  [K in keyof T]: `${Uncapitalize<K & string>}/`;\n};\nexport type StrictQueryRecord<T> = {\n  [K in keyof T]: `${Uncapitalize<K & string>}?siteCode=`;\n};\nexport type StrictEventTypeRecord<T> = {\n  [K in keyof T]: `eventType=${Uncapitalize<K & string>}`;\n};\nexport type StrictParameterRecord<T> = {\n  [K in keyof T]: `&${Uncapitalize<K & string>}=`;\n};\n\nexport type TrackParametersType = {\n  url: string;\n  headers?: Partial<Record<Header, string>>;\n  body: string;\n};\n\n/**\n * @interface an interface of External Request Dispatcher which will be used to perform requests.\n * */\nexport interface IExternalRequestDispatcher {\n  /**\n   * @method track - send a track request\n   * @param {TrackParametersType} parameters - track parameters\n   * */\n  track: (params: TrackParametersType) => Promise<boolean>;\n  /**\n   * @method getClientConfiguration - get client configuration\n   * @param {string} url - url address\n   * */\n  getClientConfiguration: (url: string) => Promise<JSONType>;\n  /**\n   * @method getRemoteData - get data from remote server of Kameleoon\n   * @param {string} url - url address\n   * */\n  getRemoteData: (url: string) => Promise<JSONType>;\n}\n"],"mappings":"iGA+DY,CAAAA,UAAU,uBAAVA,CAAU,QAAV,CAAAA,CAAU,CAAAC,GAAA,OAAVD,CAAU,CAAAE,IAAA,QAAVF,CAAU,MAAAG,OAAA,CAAAH,UAAA,CAAAA,UAAA,IAKhB,CAAAI,eAAe,CAAG,CACtB,YAAY,CACZ,YAAY,CACZ,MAAM,CACN,YAAY,CACZ,UAAU,CACV,YAAY,CACJ,CACJC,cAAc,CAAG,CACrB,gBAAgB,CAChB,IAAI,CACJ,OAAO,CACP,SAAS,CACT,YAAY,CACZ,cAAc,CACd,gBAAgB,CAChB,UAAU,CACV,aAAa,CACb,aAAa,CACb,cAAc,CACd,yBAAyB,CACzB,YAAY,CACZ,UAAU,CACV,SAAS,CACT,OAAO,CACP,kBAAkB,CAClB,WAAW,CACX,OAAO,CACP,MAAM,CACN,aAAa,CACb,YAAY,CACZ,QAAQ,CACR,IAAI,CACJ,KAAK,CACG,CACJC,aAAa,CAAG,CAAC,OAAO,CAAE,KAAK,CAAU,CACzCC,UAAU,CAAG,CAAC,KAAK,CAAE,SAAS,CAAE,QAAQ,CAAE,KAAK,CAAE,QAAQ,CAAU"}