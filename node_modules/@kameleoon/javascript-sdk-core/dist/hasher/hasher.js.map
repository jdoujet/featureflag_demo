{"version":3,"file":"hasher.js","names":["_sha","_interopRequireDefault","require","Object","defineProperty","exports","value","Hasher","a","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","b","TypeError","_defineProperties","c","d","length","enumerable","configurable","writable","_toPropertyKey","key","_createClass","_toPrimitive","toPrimitive","call","String","Number","obtainExperimentHashDouble","visitorCode","campaignId","respoolTime","respoolTimeString","forEach","respoolObject","calculateHash","obtainFeatureFlagHashDouble","suffix","seed","hashDigest","sha256","toString","parseInt","Math","pow"],"sources":["../../src/hasher/hasher.ts"],"sourcesContent":["import sha256 from 'crypto-js/sha256';\nimport {\n  ObtainExperimentHashDoubleParamsType,\n  ObtainFeatureFlagHashDoubleParamsType,\n} from './types';\n\nexport class Hasher {\n  static obtainExperimentHashDouble({\n    visitorCode,\n    campaignId,\n    respoolTime,\n  }: ObtainExperimentHashDoubleParamsType): number {\n    let respoolTimeString = '';\n\n    if (respoolTime.length) {\n      respoolTime.forEach((respoolObject) => {\n        respoolTimeString += String(respoolObject.value);\n      });\n    }\n\n    return this.calculateHash(visitorCode + campaignId + respoolTimeString);\n  }\n\n  static obtainFeatureFlagHashDouble({\n    visitorCode,\n    campaignId,\n    respoolTime,\n  }: ObtainFeatureFlagHashDoubleParamsType): number {\n    let suffix = '';\n\n    if (respoolTime) {\n      suffix += String(respoolTime);\n    }\n\n    return this.calculateHash(visitorCode + campaignId + suffix);\n  }\n\n  // --- Note ---\n  // `hashDouble` is a seeded pseudo-random number between 0 and 1\n  // used for deciding what variation to assign\n  // `calculateHash` algorithm is consistent between every SDK\n  // and will always provide same pseudo-random value for the same input parameters\n  static calculateHash(seed: string): number {\n    const hashDigest = sha256(seed).toString();\n\n    return parseInt(hashDigest, 16) / Math.pow(2, 256);\n  }\n}\n"],"mappings":"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"}