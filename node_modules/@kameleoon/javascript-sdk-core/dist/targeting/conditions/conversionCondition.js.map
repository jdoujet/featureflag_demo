{"version":3,"file":"conversionCondition.js","names":["ConversionCondition","a","b","goalId","_classCallCheck","_defineProperty","conditionValue","_createClass","key","value","evaluate","targetingData","conversionData","KameleoonData","Conversion","Ok","checkCondition","exports"],"sources":["../../../src/targeting/conditions/conversionCondition.ts"],"sourcesContent":["import { Ok, Result } from 'ts-res';\nimport { KameleoonData } from 'src/kameleoonData';\nimport { KameleoonError } from 'src/kameleoonError';\nimport { EvaluationDataType } from 'src/targeting/types';\nimport { ConditionDataType, ICondition } from './types';\n\nexport class ConversionCondition implements ICondition {\n  private conditionValue?: number | null;\n\n  constructor({ goalId }: ConditionDataType) {\n    this.conditionValue = goalId;\n  }\n\n  public evaluate({\n    targetingData,\n  }: EvaluationDataType): Result<boolean, KameleoonError> {\n    const conversionData = targetingData?.[KameleoonData.Conversion];\n\n    if (conversionData) {\n      const { goalId } = conversionData;\n\n      return Ok(this.checkCondition(goalId));\n    }\n\n    return Ok(false);\n  }\n\n  private checkCondition(goalId: number): boolean {\n    if (!this.conditionValue) {\n      return false;\n    }\n\n    // --- Note ---\n    // `goalId` with value `-1` means any goal conversion\n    if (this.conditionValue === -1) {\n      return true;\n    }\n\n    return goalId === this.conditionValue;\n  }\n}\n"],"mappings":"85CAMa,CAAAA,mBAAmB,yBAG9B,SAAAC,EAAAC,CAAA,CAA2C,IAA7B,CAAAC,CAAM,CAAAD,CAAA,CAANC,MAAM,CAAAC,eAAA,MAAAH,CAAA,EAAAI,eAAA,+BAClB,IAAI,CAACC,cAAc,CAAGH,CACxB,CAAC,OAAAI,YAAA,CAAAN,CAAA,GAAAO,GAAA,YAAAC,KAAA,CAED,SAAAC,SAAAT,CAAA,CAEwD,IADtD,CAAAU,CAAa,CAAAV,CAAA,CAAbU,aAAa,CAEPC,CAAc,QAAGD,CAAa,WAAbA,CAAa,QAAbA,CAAa,CAAGE,4BAAa,CAACC,UAAU,CAAC,CAEhE,GAAIF,CAAc,CAAE,CAClB,GAAQ,CAAAT,CAAM,CAAKS,CAAc,CAAzBT,MAAM,CAEd,MAAO,GAAAY,SAAE,EAAC,IAAI,CAACC,cAAc,CAACb,CAAM,CAAC,CACvC,CAEA,MAAO,GAAAY,SAAE,KACX,CAAC,GAAAP,GAAA,kBAAAC,KAAA,CAED,SAAAO,eAAuBb,CAAc,CAAW,SACzC,IAAI,CAACG,cAAc,GAMI,CAAC,CAAC,GAA1B,IAAI,CAACA,cAAqB,EAIvBH,CAAM,GAAK,IAAI,CAACG,cAAc,EANrC;AACA;AAMF,CAAC,IAAAL,CAAA,IAAAgB,OAAA,CAAAjB,mBAAA,CAAAA,mBAAA"}