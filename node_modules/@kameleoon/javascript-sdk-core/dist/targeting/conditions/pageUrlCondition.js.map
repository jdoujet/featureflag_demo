{"version":3,"file":"pageUrlCondition.js","names":["PageUrlCondition","a","b","matchType","url","_classCallCheck","_defineProperty","conditionValue","_createClass","key","value","evaluate","targetingData","pageViewData","KameleoonData","PageView","urlAddress","Ok","checkCondition","MatchType","CONTAINS","includes","EXACT","REGULAR_EXPRESSION","Utilities","parseRegExp","test","exhaustCheck","exports"],"sources":["../../../src/targeting/conditions/pageUrlCondition.ts"],"sourcesContent":["import { Ok, Result } from 'ts-res';\nimport { KameleoonData } from 'src/kameleoonData';\nimport { exhaustCheck, KameleoonError } from 'src/kameleoonError';\nimport { Utilities } from 'src/utilities';\nimport { EvaluationDataType, MatchType } from 'src/targeting/types';\nimport { ConditionDataType, ICondition } from './types';\n\nexport class PageUrlCondition implements ICondition {\n  private matchType?: MatchType | null;\n  private conditionValue?: string | null;\n\n  constructor({ matchType, url }: ConditionDataType) {\n    this.matchType = matchType;\n    this.conditionValue = url;\n  }\n\n  public evaluate({\n    targetingData,\n  }: EvaluationDataType): Result<boolean, KameleoonError> {\n    const pageViewData = targetingData?.[KameleoonData.PageView];\n\n    if (pageViewData) {\n      const { urlAddress } = pageViewData;\n\n      return Ok(this.checkCondition(urlAddress));\n    }\n\n    return Ok(false);\n  }\n\n  private checkCondition(url: string): boolean {\n    if (!this.matchType || !this.conditionValue) {\n      return false;\n    }\n\n    switch (this.matchType) {\n      case MatchType.CONTAINS:\n        return url.includes(this.conditionValue);\n      case MatchType.EXACT:\n        return url === this.conditionValue;\n      case MatchType.REGULAR_EXPRESSION:\n        return Utilities.parseRegExp(this.conditionValue).test(url);\n      default:\n        exhaustCheck(this.matchType);\n    }\n  }\n}\n"],"mappings":"4gDAOa,CAAAA,gBAAgB,yBAI3B,SAAAC,EAAAC,CAAA,CAAmD,IAArC,CAAAC,CAAS,CAAAD,CAAA,CAATC,SAAS,CAAEC,CAAG,CAAAF,CAAA,CAAHE,GAAG,CAAAC,eAAA,MAAAJ,CAAA,EAAAK,eAAA,0BAAAA,eAAA,+BAC1B,IAAI,CAACH,SAAS,CAAGA,CAAS,CAC1B,IAAI,CAACI,cAAc,CAAGH,CACxB,CAAC,OAAAI,YAAA,CAAAP,CAAA,GAAAQ,GAAA,YAAAC,KAAA,CAED,SAAAC,SAAAV,CAAA,CAEwD,IADtD,CAAAW,CAAa,CAAAX,CAAA,CAAbW,aAAa,CAEPC,CAAY,QAAGD,CAAa,WAAbA,CAAa,QAAbA,CAAa,CAAGE,4BAAa,CAACC,QAAQ,CAAC,CAE5D,GAAIF,CAAY,CAAE,CAChB,GAAQ,CAAAG,CAAU,CAAKH,CAAY,CAA3BG,UAAU,CAElB,MAAO,GAAAC,SAAE,EAAC,IAAI,CAACC,cAAc,CAACF,CAAU,CAAC,CAC3C,CAEA,MAAO,GAAAC,SAAE,KACX,CAAC,GAAAR,GAAA,kBAAAC,KAAA,CAED,SAAAQ,eAAuBd,CAAW,CAAW,CAC3C,GAAI,CAAC,IAAI,CAACD,SAAS,EAAI,CAAC,IAAI,CAACI,cAAc,CACzC,SAGF,OAAQ,IAAI,CAACJ,SAAS,EACpB,IAAK,CAAAgB,gBAAS,CAACC,QAAQ,CACrB,MAAO,CAAAhB,CAAG,CAACiB,QAAQ,CAAC,IAAI,CAACd,cAAc,CAAC,CAC1C,IAAK,CAAAY,gBAAS,CAACG,KAAK,CAClB,MAAO,CAAAlB,CAAG,GAAK,IAAI,CAACG,cAAc,CACpC,IAAK,CAAAY,gBAAS,CAACI,kBAAkB,CAC/B,MAAO,CAAAC,oBAAS,CAACC,WAAW,CAAC,IAAI,CAAClB,cAAc,CAAC,CAACmB,IAAI,CAACtB,CAAG,CAAC,CAC7D,QACE,GAAAuB,4BAAY,EAAC,IAAI,CAACxB,SAAS,CAAC,CAAC,CAEnC,CAAC,IAAAF,CAAA,IAAA2B,OAAA,CAAA5B,gBAAA,CAAAA,gBAAA"}