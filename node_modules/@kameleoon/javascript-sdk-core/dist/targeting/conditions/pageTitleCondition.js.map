{"version":3,"file":"pageTitleCondition.js","names":["PageTitleCondition","a","b","matchType","title","_classCallCheck","_defineProperty","conditionValue","_createClass","key","value","evaluate","targetingData","pageViewData","KameleoonData","PageView","Ok","checkCondition","MatchType","CONTAINS","includes","EXACT","REGULAR_EXPRESSION","Utilities","parseRegExp","test","exhaustCheck","exports"],"sources":["../../../src/targeting/conditions/pageTitleCondition.ts"],"sourcesContent":["import { Ok, Result } from 'ts-res';\nimport { KameleoonData } from 'src/kameleoonData';\nimport { exhaustCheck, KameleoonError } from 'src/kameleoonError';\nimport { Utilities } from 'src/utilities';\nimport { EvaluationDataType, MatchType } from 'src/targeting/types';\nimport { ConditionDataType, ICondition } from './types';\n\nexport class PageTitleCondition implements ICondition {\n  private matchType?: MatchType | null;\n  private conditionValue?: string | null;\n\n  constructor({ matchType, title }: ConditionDataType) {\n    this.matchType = matchType;\n    this.conditionValue = title;\n  }\n\n  public evaluate({\n    targetingData,\n  }: EvaluationDataType): Result<boolean, KameleoonError> {\n    const pageViewData = targetingData?.[KameleoonData.PageView];\n\n    if (pageViewData) {\n      const { title } = pageViewData;\n\n      return Ok(this.checkCondition(title));\n    }\n\n    return Ok(false);\n  }\n\n  private checkCondition(title: string): boolean {\n    if (!this.matchType || !this.conditionValue) {\n      return false;\n    }\n\n    switch (this.matchType) {\n      case MatchType.CONTAINS:\n        return title.includes(this.conditionValue);\n      case MatchType.EXACT:\n        return title === this.conditionValue;\n      case MatchType.REGULAR_EXPRESSION:\n        return Utilities.parseRegExp(this.conditionValue).test(title);\n      default:\n        exhaustCheck(this.matchType);\n    }\n  }\n}\n"],"mappings":"8gDAOa,CAAAA,kBAAkB,yBAI7B,SAAAC,EAAAC,CAAA,CAAqD,IAAvC,CAAAC,CAAS,CAAAD,CAAA,CAATC,SAAS,CAAEC,CAAK,CAAAF,CAAA,CAALE,KAAK,CAAAC,eAAA,MAAAJ,CAAA,EAAAK,eAAA,0BAAAA,eAAA,+BAC5B,IAAI,CAACH,SAAS,CAAGA,CAAS,CAC1B,IAAI,CAACI,cAAc,CAAGH,CACxB,CAAC,OAAAI,YAAA,CAAAP,CAAA,GAAAQ,GAAA,YAAAC,KAAA,CAED,SAAAC,SAAAV,CAAA,CAEwD,IADtD,CAAAW,CAAa,CAAAX,CAAA,CAAbW,aAAa,CAEPC,CAAY,QAAGD,CAAa,WAAbA,CAAa,QAAbA,CAAa,CAAGE,4BAAa,CAACC,QAAQ,CAAC,CAE5D,GAAIF,CAAY,CAAE,CAChB,GAAQ,CAAAT,CAAK,CAAKS,CAAY,CAAtBT,KAAK,CAEb,MAAO,GAAAY,SAAE,EAAC,IAAI,CAACC,cAAc,CAACb,CAAK,CAAC,CACtC,CAEA,MAAO,GAAAY,SAAE,KACX,CAAC,GAAAP,GAAA,kBAAAC,KAAA,CAED,SAAAO,eAAuBb,CAAa,CAAW,CAC7C,GAAI,CAAC,IAAI,CAACD,SAAS,EAAI,CAAC,IAAI,CAACI,cAAc,CACzC,SAGF,OAAQ,IAAI,CAACJ,SAAS,EACpB,IAAK,CAAAe,gBAAS,CAACC,QAAQ,CACrB,MAAO,CAAAf,CAAK,CAACgB,QAAQ,CAAC,IAAI,CAACb,cAAc,CAAC,CAC5C,IAAK,CAAAW,gBAAS,CAACG,KAAK,CAClB,MAAO,CAAAjB,CAAK,GAAK,IAAI,CAACG,cAAc,CACtC,IAAK,CAAAW,gBAAS,CAACI,kBAAkB,CAC/B,MAAO,CAAAC,oBAAS,CAACC,WAAW,CAAC,IAAI,CAACjB,cAAc,CAAC,CAACkB,IAAI,CAACrB,CAAK,CAAC,CAC/D,QACE,GAAAsB,4BAAY,EAAC,IAAI,CAACvB,SAAS,CAAC,CAAC,CAEnC,CAAC,IAAAF,CAAA,IAAA0B,OAAA,CAAA3B,kBAAA,CAAAA,kBAAA"}