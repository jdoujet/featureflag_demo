{"version":3,"file":"storage.js","names":["_javascriptSdkCore","require","Object","defineProperty","exports","value","StorageConstructor","_typeof","a","Symbol","iterator","constructor","prototype","_defineProperty","b","c","_toPropertyKey","enumerable","configurable","writable","_classCallCheck","TypeError","_defineProperties","d","length","key","_createClass","_toPrimitive","toPrimitive","call","String","Number","initialize","storage","Storage","storageKey","get","read","data","localStorage","getItem","Ok","Err","KameleoonError","KameleoonException","StorageRead","write","setItem","err","StorageWrite"],"sources":["../src/storage.ts"],"sourcesContent":["import {\n  Ok,\n  Err,\n  Result,\n  KameleoonError,\n  IExternalStorage,\n  KameleoonException,\n  KameleoonStorageKey,\n  IExternalStorageConstructor,\n} from '@kameleoon/javascript-sdk-core';\n\nexport class StorageConstructor implements IExternalStorageConstructor {\n  public initialize(key: KameleoonStorageKey): IExternalStorage {\n    const storage = new Storage(key);\n\n    return storage;\n  }\n}\n\nclass Storage implements IExternalStorage {\n  private storageKey: KameleoonStorageKey;\n\n  constructor(key: KameleoonStorageKey) {\n    this.storageKey = key;\n  }\n\n  get key(): KameleoonStorageKey {\n    return this.storageKey;\n  }\n\n  public read(): Result<string, KameleoonError> {\n    const data = localStorage.getItem(this.storageKey);\n\n    if (!data) {\n      return Err(\n        new KameleoonError(KameleoonException.StorageRead, this.storageKey),\n      );\n    }\n\n    return Ok(data);\n  }\n\n  public write(data: string): Result<void, KameleoonError> {\n    try {\n      localStorage.setItem(this.storageKey, data);\n\n      return Ok();\n    } catch (err) {\n      return Err(new KameleoonError(KameleoonException.StorageWrite, err));\n    }\n  }\n}\n"],"mappings":"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"}